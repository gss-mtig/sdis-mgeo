


<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Infraestructuras de datos espaciales y estándares de geoservicios.">
      
      
        <link rel="canonical" href="https://gss-mtig.github.io/sdis-mgeo-20-21/12_ejemplo_sensores_port_bcn/">
      
      
        <meta name="author" content="sdis-mgeo">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
      
        <title>Ejemplo sensores port Barcelona - Infraestructuras de datos espaciales y estándares de geoservicios</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4dd2dd8d.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ejemplo-sensores-port-barcelona" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Cabecera">
    <a href="https://gss-mtig.github.io/sdis-mgeo-20-21/" title="Infraestructuras de datos espaciales y estándares de geoservicios" class="md-header-nav__button md-logo" aria-label="Infraestructuras de datos espaciales y estándares de geoservicios">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Infraestructuras de datos espaciales y estándares de geoservicios
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Ejemplo sensores port Barcelona
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/gss-mtig/sdis-mgeo-20-21/" title="Ir al repositorio" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://gss-mtig.github.io/sdis-mgeo-20-21/" title="Infraestructuras de datos espaciales y estándares de geoservicios" class="md-nav__button md-logo" aria-label="Infraestructuras de datos espaciales y estándares de geoservicios">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Infraestructuras de datos espaciales y estándares de geoservicios
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/gss-mtig/sdis-mgeo-20-21/" title="Ir al repositorio" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../1_introduccion_a_las_ides/" title="1. Introducción a las IDE's" class="md-nav__link">
      1. Introducción a las IDE's
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2_estandares_OCG/" title="2. Estándares OCG" class="md-nav__link">
      2. Estándares OCG
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3_estandares_ISO/" title="3. Estándares ISO" class="md-nav__link">
      3. Estándares ISO
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../4_visualizacion_kepler/" title="4. Visualización con Kepler.gl" class="md-nav__link">
      4. Visualización con Kepler.gl
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../5_herramientas_visualizacion_datos/" title="5. Herramientas de visualización de datos" class="md-nav__link">
      5. Herramientas de visualización de datos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../6_conceptos_geoservicios/" title="6. Conceptos básicos de Geoservicios" class="md-nav__link">
      6. Conceptos básicos de Geoservicios
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../7_ejemplo_servicio_wms/" title="7. Ejemplo servicio WMS" class="md-nav__link">
      7. Ejemplo servicio WMS
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../8_consideraciones_servicios_opendata/" title="8. Consideraciones sobre servicios Open data" class="md-nav__link">
      8. Consideraciones sobre servicios Open data
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../9_ejemplo_servicio_bicing_bcn/" title="9. Ejemplo servicio bicing Barcelona" class="md-nav__link">
      9. Ejemplo servicio bicing Barcelona
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../10_ejemplo_servicio_bicing_bcn_vt/" title="10. Ejemplo servicio bicing Barcelona (VectorTiles)" class="md-nav__link">
      10. Ejemplo servicio bicing Barcelona (VectorTiles)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../11_consideraciones_servicios_realtime_sensores/" title="11. Consideraciones sobre servicios de Sensores" class="md-nav__link">
      11. Consideraciones sobre servicios de Sensores
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../13_ejemplo_sentilo_aca/" title="12. Ejemplo Sentilo ACA" class="md-nav__link">
      12. Ejemplo Sentilo ACA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../14_geoservicios_realtime/" title="13. Geoservicios realtime" class="md-nav__link">
      13. Geoservicios realtime
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../15_herramientas_visualizacion_geoservicios/" title="14. Herramientas de visualización geoservicios" class="md-nav__link">
      14. Herramientas de visualización geoservicios
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../16_ejemplo_mobility/" title="15. Ejemplo Mobility" class="md-nav__link">
      15. Ejemplo Mobility
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../17_ejemplo_geoservicio_realtime/" title="16. Ejemplo servicio realtime para compartir la ubicación" class="md-nav__link">
      16. Ejemplo servicio realtime para compartir la ubicación
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../18_ejemplo_gtfs/" title="17. Ejemplo GTFS" class="md-nav__link">
      17. Ejemplo GTFS
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acceso-al-servicio-de-datos-de-sensores-del-port-de-barcelona" class="md-nav__link">
    Acceso al servicio de datos de sensores del Port de Barcelona
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-un-visor" class="md-nav__link">
    Creación de un visor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" class="md-nav__link">
    Referencias
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/gss-mtig/sdis-mgeo-20-21/edit/master/docs/12_ejemplo_sensores_port_bcn.md" title="Editar esta página" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="ejemplo-sensores-port-barcelona">Ejemplo sensores port Barcelona</h1>
<h2 id="acceso-al-servicio-de-datos-de-sensores-del-port-de-barcelona">Acceso al servicio de datos de sensores del Port de Barcelona</h2>
<p>En el portal de sensores del Port de Barcelona <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> podemos encontrar una serie de componentes gráficos o widgets que permiten acceder a los datos de los diferentes sensores SOS <sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>. También podemos acceder directamente al servicio <a href="http://sensors.portdebarcelona.cat/sos/json">http://sensors.portdebarcelona.cat/sos/json</a> si queremos implementar nuestros propios componentes o procesar los datos directamente.</p>
<p>En la documentación del servicio vemos que estos widgets implementan un cliente SOS que soporta la versión 2.0 de estándard. Los widgets necesitan un endpoint en formato JSON. Lo cual resulta no ser un requisito del estándar si no una funcionalidad opcional que proporciona la implementación del servidor SOS de 52 north en su versión 4.0.0 o superior.</p>
<p>La ventaja de utilizar los widgets es que proporcionan una capa de abstracción que hace el "trabajo sucio" y evita trabajar directamente con el servicio.</p>
<p>La implementación de los widgets es open source <sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup> y extensible, lo que permite poder desarrollar nuestros propios widgets.</p>
<h2 id="creacion-de-un-visor">Creación de un visor</h2>
<p>Para crear un visor de mapas utilizaremos el widget de Mapa <sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup> que está basado en la librería de mapas Leaflet. <sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup></p>
<ul>
<li>Crear una carpeta con el nombre de <em>visor-port</em>.</li>
<li>Crear un archivo con el nombre de <em>index.html</em> dentro de la carpeta.</li>
<li>Abrir el archivo index.html con un editor de texto y copiar el siguiente código.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>
<p>Abrir el archivo index.html en el navegador para confirmar que carga un mapa del mundo. Este mapa no contiene ninguna información.</p>
</li>
<li>
<p>Agregar algunas features (sensores) en la matriz de features. Para obtenter las features tendríamos que hacer una petición de GetFeatureOfInterest <sup id="fnref:6"><a class="footnote-ref" href="#fn:6">6</a></sup>. Para agregar algunos elementos en el mapa reemplazar la propiedad features por lo siguiente:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="hll">      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
</span><span class="hll">      <span class="p">],</span>
</span>      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>
<p>Recargar el mapa y confirmar que aparecen unos puntos en el puerto de Barcelona.</p>
</li>
<li>
<p>Agregar propiedades a los sensores. Ya tenemos algunos sensores en nuestro mapa pero no tenemos datos asociados a los mismos. Para ello indicar que propiedades queremos observar. Esto lo indicaremos en la matriz de properties de nuestro mapa. Agregar las siguientes propiedades para ver la temperatura</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
<span class="hll">      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
</span><span class="hll">      <span class="p">],</span>
</span>  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>
<p>Recargar el mapa y pasar el cursor sobre algún elemento para ver que se despliega un panel con las temperaturas.</p>
</li>
<li>
<p>Combinar varios widgets en la aplicación. Mostar un popup con un widget al hacer click sobre un elemento. Utilizar la opción <em>popup_widget</em> del mapa. Cargar un widget de tipo serie de tiempo con las temperaturas. Escribir justo debajo de las propertities lo siguiente:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
<span class="hll">      <span class="s2">&quot;popup_widget&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;timechart&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Temperatures&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
</span><span class="hll">          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
</span><span class="hll">          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="s2">&quot;time_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T05:05:40Z&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;time_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T08:05:40Z&quot;</span>
</span><span class="hll">      <span class="p">}</span>
</span>  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>
<p>Recargar la página y clicar sobre un elemento para ver un popup con la serie temporal de las temperaturas.</p>
</li>
<li>
<p>Mostrar un widget en un div fuera del mapa al hacer click sobre un elemento. Escribir justo debajo de donde declaramos el div del mapa lo siguiente</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;popup_widget&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;timechart&quot;</span><span class="p">,</span>
        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Temperatures&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;time_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T05:05:40Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;time_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T08:05:40Z&quot;</span>
      <span class="p">}</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>Crear un nuevo estilo para este div. Escibir en nuestro apartado de estilo css</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

<span class="hll">    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
</span><span class="hll">      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span><span class="hll">      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="hll">      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="hll">      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
</span><span class="hll">      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
</span><span class="hll">      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;popup_widget&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;timechart&quot;</span><span class="p">,</span>
        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Temperatures&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;time_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T05:05:40Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;time_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T08:05:40Z&quot;</span>
      <span class="p">}</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>Quitar la opción de <em>popup_widget</em> del mapa.</li>
</ul>
<div class="highlight"><pre><span></span><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Sensores Port de Barcelona&lt;/title&gt;
  &lt;style&gt;
    #map-container {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
    }

    #info-container {
      position: absolute;
      top: 0;
      left: 0;
      width: &quot;200px&quot;;
      z-index: 9000;
      background-color: rgba(255,255,255,0.7);
    }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;map-container&quot;&gt;&lt;/div&gt;
  &lt;div id=&quot;info-container&quot;&gt;&lt;/div&gt;

  &lt;script src=&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;

    SensorWidget(&#39;map&#39;, {
      &quot;service&quot;: &quot;http://sensors.portdebarcelona.cat/sos/json&quot;,
      &quot;offering&quot;: &quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;,
      &quot;swap_axis&quot;: true,
      &quot;features&quot;: [
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;
      ],
      &quot;properties&quot;: [
        &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;
      ],
<span class="gd">-      &quot;popup_widget&quot;: {</span>
<span class="gd">-        &quot;name&quot;: &quot;timechart&quot;,</span>
<span class="gd">-        &quot;title&quot;: &quot;Temperatures&quot;,</span>
<span class="gd">-        &quot;properties&quot;: [</span>
<span class="gd">-          &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;,</span>
<span class="gd">-          &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;,</span>
<span class="gd">-          &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
<span class="gd">-        ],</span>
<span class="gd">-        &quot;time_start&quot;: &quot;2015-09-03T05:05:40Z&quot;,</span>
<span class="gd">-        &quot;time_end&quot;: &quot;2015-09-03T08:05:40Z&quot;</span>
<span class="gd">-      }</span>
  }, document.getElementById(&#39;map-container&#39;));

  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>

<ul>
<li>Utilizar la opción de <em>on_click</em> del mapa. Esta opción permite definir una función que se ejecuta al hacer click sobre un elemento del mapa. Copiar debajo de las properties lo siguiente:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
<span class="hll">      <span class="s2">&quot;on_click&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
</span><span class="hll">         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span><span class="hll">      <span class="p">}</span>
</span>    <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>
<p>Recargar la página y clicar sobre un elemento. Abrir la consola de desarrollador para ver que aparece la información del elemento clicado.</p>
</li>
<li>
<p>Crear una función que recibe como parámetro el id de un elemento y crea un widget de tipo termómetro. Escribir antes de donde se cierra el tag de script</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;on_click&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

<span class="hll">    <span class="kd">function</span> <span class="nx">showTermometro</span><span class="p">(</span><span class="nx">feature_id</span><span class="p">){</span>
</span><span class="hll">      <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">        <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;feature&quot;</span><span class="o">:</span> <span class="nx">feature_id</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;property&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;refresh_interval&quot;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;footnote&quot;</span><span class="o">:</span> <span class="s2">&quot;A sample footnote for Thermometer widget&quot;</span>
</span><span class="hll">      <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;info-container&#39;</span><span class="p">));</span>
</span><span class="hll">    <span class="p">}</span>
</span>  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>Llamar a la nueva función <strong>showTermometro</strong> dentro de la función del <em>on_click</em>. Escribir luego del console.log</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;on_click&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="hll">         <span class="nx">showTermometro</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">feature</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</span>      <span class="p">}</span>
    <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

    <span class="kd">function</span> <span class="nx">showTermometro</span><span class="p">(</span><span class="nx">feature_id</span><span class="p">){</span>
      <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
        <span class="s2">&quot;feature&quot;</span><span class="o">:</span> <span class="nx">feature_id</span><span class="p">,</span>
        <span class="s2">&quot;property&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;refresh_interval&quot;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
        <span class="s2">&quot;footnote&quot;</span><span class="o">:</span> <span class="s2">&quot;A sample footnote for Thermometer widget&quot;</span>
      <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;info-container&#39;</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>

<ul>
<li>Recargar el mapa y clicar sobre un elemento para ver como se desplega el widget del termómetro con la temperatura actual.</li>
</ul>
<p><img alt="mapa de sensores del port de barcelona" src="../img/sensores_port_bcn.png" />
<em>mapa de sensores del port de barcelona</em></p>
<div class="admonition question">
<p class="admonition-title">Ejercicio</p>
<p>Crear una función para mostrar el widget de <strong>manómetro</strong> en lugar del termómetro. Llamar esta nueva función al hacer click sobre un sensor.</p>
<p>En el siguiente enlace se pueden ver las diferentes opciones <a href="http://sensors.portdebarcelona.cat/?lang=es#gauge">http://sensors.portdebarcelona.cat/?lang=es#gauge</a></p>
</div>
<h2 id="referencias">Referencias</h2>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="http://sensors.portdebarcelona.cat/?lang=es">http://sensors.portdebarcelona.cat/?lang=es</a>&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="http://sensor-widgets.readthedocs.io/es/latest/sos.html">http://sensor-widgets.readthedocs.io/es/latest/sos.html</a>&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="https://github.com/oscarfonts/sensor-widgets">https://github.com/oscarfonts/sensor-widgets</a>&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p><a href="http://sensor-widgets.readthedocs.io/es/latest/widgets.html#mapa-map">http://sensor-widgets.readthedocs.io/es/latest/widgets.html#mapa-map</a>&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p><a href="http://leafletjs.com/">http://leafletjs.com/</a>&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p><a href="http://sensor-widgets.readthedocs.io/es/latest/sos.html#getfeatureofinterest">http://sensor-widgets.readthedocs.io/es/latest/sos.html#getfeatureofinterest</a>&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>